function createDatatable(config){return $(`#${config.table_id}`).DataTable(loadDatatableConfig(config))}function loadDatatableConfig(config){var Criteria=$.fn.dataTable.Criteria,buttons;return config.columns.map((function(e){-1!=config.ajax.data.orderable.indexOf(e.name)?Object.assign(e,{orderable:!0}):Object.assign(e,{orderable:!1})})),buttons=[{extend:"pageLength",className:"dt-btn-lg dt-btn-pj",attr:{title:"Ubah Jumlah data tampil"},dom:{buttonLiner:null}},{className:"group dt-btn-lg dt-btn-pj",attr:{title:"Filter Data"},extend:"searchBuilder",config:{depthLimit:1,columns:config.ajax.data.searchable.map((function(e){return e+":name"})),conditions:{string:{"!=":null,starts:null,"!starts":null,"!contains":null,ends:null,"!ends":null,"!null":null},num:{"!=":null,"!between":null,"!null":null,between:null},date:{"!=":null,"!between":null,"!null":null,between:null},html:{"=":null,"!=":null,starts:null,"!starts":null,"!contains":null,ends:null,"!ends":null,"!null":null},array:{"=":{init:function(that,fn,preDefined=null,array=!1){let column=that.dom.data.children("option:selected").val(),indexArray=that.s.dt.rows().indexes().toArray(),settings=that.s.dt.settings()[0];that.dom.valueTitle.prop("selected",!0);let el=$("<select/>").addClass(Criteria.classes.value).addClass(Criteria.classes.dropDown).addClass(Criteria.classes.italic).addClass(Criteria.classes.select).append(that.dom.valueTitle).on("change.dtsb",(function(){$(this).removeClass(Criteria.classes.italic),fn(that,this)}));that.c.greyscale&&el.addClass(Criteria.classes.greyscale);let added=[],options=[],addOption=(filt,text)=>{that.s.type.includes("html")&&null!==filt&&"string"==typeof filt&&filt.replace(/(<([^>]+)>)/gi,"");let opt=$("<option>",{type:Array.isArray(filt)?"Array":"String",value:filt}).data("sbv",filt).addClass(that.classes.option).addClass(that.classes.notItalic).html("string"==typeof text?limitText(text.replace(/(<([^>]+)>)/gi,"")):limitText(text)),val=opt.val();-1===added.indexOf(val)&&(added.push(val),options.push(opt),null!==preDefined&&Array.isArray(preDefined[0])&&(preDefined[0]=preDefined[0].sort().join(",")),null!==preDefined&&opt.val()===preDefined[0]&&(opt.prop("selected",!0),el.removeClass(Criteria.classes.italic),that.dom.valueTitle.removeProp("selected")))};if(config.columns[column].options)config.columns[column].options.forEach((function(val){addOption(val.value,val.text)}));else for(let index of indexArray){let filter=settings.oApi._fnGetCellData(settings,index,column,"string"==typeof that.c.orthogonal?that.c.orthogonal:that.c.orthogonal.search),value={filter:"string"==typeof filter?filter.replace(/[\r\n\u2028]/g," "):filter,index:index,text:settings.oApi._fnGetCellData(settings,index,column,"string"==typeof that.c.orthogonal?that.c.orthogonal:that.c.orthogonal.display)};if("array"===that.s.type&&(value.filter=Array.isArray(value.filter)?value.filter:[value.filter],value.text=Array.isArray(value.text)?value.text:[value.text]),array)for(let i=0;i<value.filter.length;i++)addOption(value.filter[i],value.text[i]);else addOption(value.filter,Array.isArray(value.text)?value.text.join(", "):value.text)}options.sort((a,b)=>"array"===that.s.type||"string"===that.s.type||"html"===that.s.type?a.val()<b.val()?-1:a.val()>b.val()?1:0:"num"===that.s.type||"html-num"===that.s.type?+a.val().replace(/(<([^>]+)>)/gi,"")<+b.val().replace(/(<([^>]+)>)/gi,"")?-1:+a.val().replace(/(<([^>]+)>)/gi,"")>+b.val().replace(/(<([^>]+)>)/gi,"")?1:0:"num-fmt"===that.s.type||"html-num-fmt"===that.s.type?+a.val().replace(/[^0-9.]/g,"")<+b.val().replace(/[^0-9.]/g,"")?-1:+a.val().replace(/[^0-9.]/g,"")>+b.val().replace(/[^0-9.]/g,"")?1:0:void 0);for(let opt of options)el.append(opt);return el}},"!=":null,starts:null,"!starts":null,"!contains":null,contains:null,without:null,ends:null,"!ends":null,"!null":null}}}}],config.buttons.hasOwnProperty("xlsx")&&buttons.push({extend:"excelHtml5",text:'<svg class="h-5 w-5 -mt-1 text-gray-600 group-hover:text-white inline group-hover:scale-150 transition-all duration-300" viewBox="0 0 20 22" fill="currentColor">\n      <path d="M0.858993 1.877L13.429 0.0820015C13.4999 0.0718249 13.5722 0.0770173 13.641 0.0972267C13.7097 0.117436 13.7734 0.15219 13.8275 0.199134C13.8817 0.246078 13.9251 0.304114 13.9548 0.369309C13.9846 0.434504 14 0.505335 14 0.577002V21.423C14 21.4946 13.9846 21.5653 13.9549 21.6304C13.9252 21.6955 13.8819 21.7535 13.8278 21.8004C13.7738 21.8474 13.7103 21.8821 13.6417 21.9024C13.573 21.9227 13.5009 21.928 13.43 21.918L0.857993 20.123C0.619612 20.0891 0.401485 19.9702 0.243682 19.7884C0.0858781 19.6065 -0.00100477 19.3738 -0.00100708 19.133V2.867C-0.00100477 2.62621 0.0858781 2.39351 0.243682 2.21164C0.401485 2.02978 0.619612 1.91095 0.857993 1.877H0.858993ZM15 2H19C19.2652 2 19.5196 2.10536 19.7071 2.29289C19.8946 2.48043 20 2.73478 20 3V19C20 19.2652 19.8946 19.5196 19.7071 19.7071C19.5196 19.8946 19.2652 20 19 20H15V2ZM8.19999 11L11 7H8.59999L6.99999 9.286L5.39999 7H2.99999L5.79999 11L2.99999 15H5.39999L6.99999 12.714L8.59999 15H11L8.19999 11Z"/>\n      </svg>',attr:{title:"Export dalam format Excel"},className:"group dt-btn-lg dt-btn-success"}),config.buttons.hasOwnProperty("add")&&buttons.push({text:'<svg class="h-5 w-5 -mt-1 text-gray-600 group-hover:text-white inline group-hover:scale-150 transition-all duration-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z" />\n              </svg>',attr:{title:"Tambah data"},action:function(){window.location.href=config.buttons.add.url},className:"group dt-btn-lg dt-btn-primary"}),config.buttons.hasOwnProperty("delete")&&$(document.body).append('<section class="modals opacity-0 pointer-events-none fixed w-full h-full top-0 left-0 flex items-center justify-center z-40" id="delete_records">\n    <div class="modal-overlay absolute w-full h-full bg-gray-900 opacity-50"></div>\n\n    <div class="bg-white w-11/12 md:max-w-md mx-auto rounded-2xl shadow-lg z-50 overflow-y-auto">\n\n        <div class="modal-close absolute top-0 right-0 cursor-pointer flex flex-col items-center mt-4 mr-4 text-white text-sm z-50">\n            <svg class="fill-current text-white" width="18" height="18" viewBox="0 0 18 18">\n                <path d="M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"></path>\n            </svg>\n            <span class="text-sm">(Esc)</span>\n        </div>\n\n        \x3c!-- Add margin if you want to see some of the overlay behind the modal--\x3e\n        <div class="modal-content py-4 text-left px-6">\n            \x3c!--Title--\x3e\n            <div class="flex justify-between items-center pb-3">\n                <p class="text-2xl font-bold">Konfirmasi!</p>\n\n                <div class="modal-close close-records-modal cursor-pointer z-40">\n                    \x3c!-- Tombol Close--\x3e\n                    <svg class="fill-current text-black" width="18" height="18" viewBox="0 0 18 18">\n                        <path d="M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"></path>\n                    </svg>\n                </div>\n            </div>\n                <div class="alert-info" style="background-color: white">\n                    <p class="font-semibold">Apakah anda yakin ingin menghapus <span id="delete-records-number"></span> data?</p>\n                </div>\n                <input id=\'user-id-to-delete\' type="hidden" name="user_id" value="">\n                <div class="flex justify-end my-2">\n                <button type="reset"   class="modal-close close-records-modal mr-2 formButton-secondary">Batal</button>\n                <button type="button" id=\'confirm-delete-records\' class="formButton ">Hapus</button>\n                </div>\n          </div>\n      </div>\n  </section>')&&$("#confirm-delete-records").on("click",(function(){$.ajax({type:"POST",url:config.buttons.delete.url,data:window.deletePostData,success:function(response){response>0&&location.reload()},error:function(){location.reload()}})}))&&$(".close-records-modal").on("click",(function(){selectedModalTargetId="delete_records",toggleModal(selectedModalTargetId)}))&&buttons.push({text:'<svg class="h-5 w-5 -mt-1 text-gray-600 group-hover:text-white inline group-hover:scale-150 transition-all duration-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />\n              </svg>',attr:{title:"Hapus data"},className:"group dt-btn-lg dt-btn-danger",action:function(){postData={selections:mapSelection(this.rows({selected:!0})[0],this.ajax.json().ids),request_type:"delete"},Object.assign(postData,config.buttons.delete.postData),postData.selections.length>0&&($("#delete-records-number").html(postData.selections.length),selectedModalTargetId="delete_records",toggleModal(selectedModalTargetId),window.deletePostData=postData)}}),config.buttons.hasOwnProperty("manipulateSelected")&&buttons.push({className:config.buttons.manipulateSelected.className+" dt-btn-lg dt-btn-pj",text:config.buttons.manipulateSelected.text,action:function(){postData={selections:mapSelection(this.rows({selected:!0})[0],this.ajax.json().ids),request_type:"manipulate-selected"},Object.assign(postData,config.buttons.manipulateSelected.postData),$.ajax({type:"POST",url:config.buttons.manipulateSelected.url,data:postData,success:function(response){config.buttons.manipulateShown.redirect?window.location.href=JSON.parse(response).url:(response=JSON.parse(response)).reload&&location.reload()}})}}),config.buttons.hasOwnProperty("manipulateShown")&&buttons.push({className:config.buttons.manipulateShown.className+" dt-btn-lg dt-btn-pj",text:config.buttons.manipulateShown.text,action:function(){var postData={shown_data:this.ajax.json().ids,request_type:"manipulate-shown"};Object.assign(postData,config.buttons.manipulateShown.postData),$.ajax({type:"POST",url:config.buttons.manipulateShown.url,data:postData,success:function(response){config.buttons.manipulateShown.redirect?window.location.href=JSON.parse(response).url:(response=JSON.parse(response)).reload&&location.reload()}})}}),config.buttons.hasOwnProperty("custom")&&buttons.push({text:config.buttons.custom.text,action:config.buttons.custom.action,className:config.buttons.custom.className+" dt-btn-lg dt-btn-pj"}),{buttons:{dom:{buttonLiner:{tag:"span",className:""}},buttons:buttons},processing:!0,serverSide:!0,select:!0,order:[[0,"asc"]],dom:"Bfrtip",lengthMenu:[[10,25,50,250],["10 baris","25 baris","50 baris","250 baris"]],language:{url:baseUrl("js/datatables/indonesian.json")},searchDelay:500,scrollX:!0,ajax:config.ajax,columns:config.columns,drawCallback:config.drawCallback}}function mapSelection(selected,all){return selected.map((function(e){return all[e]}))}var postData=()=>{var postData=[];return postData[$("#secureData").attr("name")]=$("#secureData").val(),{...postData}};